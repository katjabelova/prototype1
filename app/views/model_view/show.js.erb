$( document ).on('ajaxStart', function() {
//    $('.sk-cube-grid').show();
//    $('div#content').hide();
//    $('div#submitdiv').hide();
});

function updateChart1() {
  <% puts "updating chart " %>

  var chartOptions = {
    <% if @outputArray == nil || @outputArray == [] %>
    <% puts "in default case" %>
 //   window.alert("in deafault case");
    chart: { type: "column" },
    title: { text: "default chart" },
    xAxis: { type: "column", categories: "" },
    yAxis: { title: { text: "default yAxis" } },
    series: [{ name: "Default data", data: [1, 2, 3, 4] }]
    <% else %>
    <% puts "in parsed case" %>
     <% puts "chart: "+ @outputArray[0].chart %>
      <% puts "title: " + @outputArray[0].title  %>
       <% puts "x type:" + @outputArray[0].xAxis[:type] %>
        <% puts "x categories" + @outputArray[0].xAxis[:categories].to_s %>
         <% puts "y title" + @outputArray[0].yAxis[:title] %>
          <% puts "serie name" +  @outputArray[0].series[0][0] %>
          <% rawValue = raw @outputArray[0].series[0][1] %>
           <% puts "serie data" +  rawValue %>
 //   window.alert("in parsed case");
    chart: { type: "<%= @outputArray[0].chart.to_s %>" },
    title: { text: "<%= @outputArray[0].title.to_s %>" },
    xAxis: { type: "<%= @outputArray[0].xAxis[:type] %>", categories: <%= raw @outputArray[0].xAxis[:categories] %> },
    yAxis: { title: { text: "<%= @outputArray[0].xAxis[:type] %>" } },
    series: [{ name: "<%= @outputArray[0].series[0][0] %>", data: <%= raw @outputArray[0].series[0][1] %> }]
    <% end %>
  };
//  updateChart();
        Highcharts.chart('content1', chartOptions1);
};

$('.delete_pony').bind('ajax:success', function() {
    $('.sk-cube-grid').hide();
    window.alert("delete pony on submit");

  /*
    var contentSubmit = document.getElementById("submitdiv");
    var visibleSubmit = $(contentSubmit).is(":visible")
    if (!visibleSubmit) {
        $('div#submitdiv').toggle();
    }
    console.log('in success case');
 */
    var content = '<%= @content %>';
    var contentElement = document.getElementById("content");
    var visibleContent = $(contentElement).is(":visible")
    if (!visibleContent) {
        $('div#content').toggle();
    }
    contentElement.innerHTML = content;
});
/*
$( document ).ready(function() {
  window.alert("javascript found");

  <% graphValue = raw @defaultGraph %>
  <% puts "default graph: " + graphValue %>
  var chartOptions = {
    <% if @outputArray == nil || @outputArray == [] %>
    <% puts "in default case" %>
 //   window.alert("in deafault case");
    chart: { type: "column" },
    title: { text: "default chart" },
    xAxis: { type: "column", categories: "" },
    yAxis: { title: { text: "default yAxis" } },
    series: [{ name: "Default data", data: [1, 2, 3, 4] }]
    <% else %>
    <% puts "in parsed case" %>
 //   window.alert("in parsed case");
    chart: { type: <%= @outputArray[0].chart %> },
    title: { text: <%= @outputArray[0].title %> },
    xAxis: { type: <%= @outputArray[0].xAxis[:type] %>, categories: <%= raw @outputArray[0].xAxis[:categories] %> },
    xAxis: { title: { text: <%= @outputArray[0].xAxis[:type] %> } },
    series: [{ name: <%= @outputArray[0].series[0][0] %>, data: <%= raw @outputArray[0].series[0][1] %>  }]
    <% end %>
  };

  window.updateChart = function() {
   var chartType = "column";
   var title = "default chart";
  // chartOptions.chart.type = chartType;
  // chartOptions.title = title;
  window.alert("chart option: " + chartOptions.title.text);
  <% puts "in update chart" %>
   Highcharts.chart('content1', chartOptions);
  };

  updateChart();

}); */
