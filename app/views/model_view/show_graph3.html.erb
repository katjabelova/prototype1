<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
  <link href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css' rel='stylesheet' type='text/css'>
  <link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel = "stylesheet">

  <script src="https://code.jquery.com/jquery-2.1.1.js"></script>
  <script src="https://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
<!-- plus a jQuery UI theme, here I use "flick" -->
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/flick/jquery-ui.css">

  <script scr="https://cdnjs.cloudflare.com/ajax/libs/jQuery-ui-Slider-Pips/1.11.4/jquery-ui-slider-pips.css"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-ui-Slider-Pips/1.11.4/jquery-ui-slider-pips.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-ui-Slider-Pips/1.11.4/jquery-ui-slider-pips.min.css"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-ui-Slider-Pips/1.11.4/jquery-ui-slider-pips.min.js"></script>
  <style>
  main {
    position: absolute;
    background-color: transparent;
  }

  body {
    background-color: rgba(255,228,196, 0.3);
  }

  .wrapper {
    background-color: transparent;
  }

  #contentinner {

  }
  </style>
</head>
  <body>
    <div class="wrapper">
      <nav id="sidebar">
       <!-- Sidebar Header -->
       <div class="sidebar-header" align="center">
           <h3>Settings</h3>
       </div>
       <ul style="list-style-type:none">
         <li id="invest" class="tooltip"> Invest
           <span id="tooltiptext" style="display:none;">Tooltip Hint Text</span>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
           <div id="slider1" class="slider">
           </div>
        </li>
     <li id="agrar">Agrar
       <div id="slider2" class="slider">
       </div>
      </li>
       <li id="nr">NR
       <div id="slider3" class="slider">
       </div>
       </li>
       <li id="fm">FM
       <div id="slider4" class="slider">
       </div>
       </li>
       <li id="ma">MA
       <div id="slider5" class="slider">
       </div>
       </li>
       <li id="hr">HR
       <div id="slider6" class="slider">
       </div>
       </li>
     </ul>
       <div class="input-group">
         <input id="text_input" type="text" class="form-control" aria-label="Text input with dropdown button" readonly value="1">
         <div class="input-group-append">
           <button id="button_plus" type="button" class="btn btn-primary">+</button>
           <button id="button_minus" type="button" class="btn btn-primary">-</button>
         </div>
       </div>

<!--  <div class="slidecontainer" style="dispay:none;">
         <label for="slider-fill">Input slider:</label>
         <input type="range" name="slider-fill" class="slider" min="0.0" max="1.0" value="0.25" id="myRange1" data-slider-id ="myRange1" step="0.01" data-highlight="true">
           <p>Value investment: <span id="demo_1"></span></p>
       </div>
      <div class="slidecontainer" style="dispay:none;">
         <input type="range" class="slider" min="0.0" max="1.0" value="0.33" id="myRange2" step="0.01">
           <p>Value agrar_share: <span id="demo_2"></span></p>
       </div>

       <div class="slidecontainer" style="dispay:none;">
         <input type="range" class="slider" min="0" max="10" value="2" id="myRange3">
           <p>Value nr: <span id="demo_3"></span></p>
       </div>
       <div class="slidecontainer" style="dispay:none;">
         <input type="range" class="slider" min="0" max="10" value="3" id="myRange4">
           <p>Value fm: <span id="demo_4"></span></p>
       </div>

       <div class="slidecontainer" style="dispay:none;">
         <input type="range" class="slider" min="0" max="10" value="6" id="myRange5">
           <p>Value ma: <span id="demo_5"></span></p>
       </div>
       <div class="slidecontainer" style="dispay:none;">
         <input type="range" class="slider" min="0" max="10" value="1" id="myRange6">
           <p>Value hr: <span id="demo_6"></span></p>
       </div> -->

       <p id="hidden" style="display:none;"></p>
   </nav>
   <div id="contentinner">
      <h1>Graph</h1>
      <script src="http://code.highcharts.com/highcharts.js"></script>
      <script src="http://code.highcharts.com/modules/exporting.js"></script>


<!-- Trigger the modal with a button -->
      <button type="button" class="btn btn-info btn-lg" id="showModal" style="display:none">Settings</button>


      <button id="wzs" type="button" class="autocompare">WZS</button>
      <button id="z1" class="autocompare">Z1</button>
      <button id="z2" class="autocompare">Z2</button>
      <button id="z3" class="autocompare">Z3</button>
      <button id="z4" class="autocompare">Z4</button>
      <button id="z5" class="autocompare">Z5</button>
      <button id="z6" class="autocompare">Z6</button>
      <button id="z7" class="autocompare">Z7</button>


<!-- Modal -->
    <div id="myModal" class="modal fade" role="dialog">
      <div class="modal-dialog modal-lg">

    <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Modal Header</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="page" id="1">
          <div class="dropdown">
  <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Dropdown button
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    <a class="dropdown-item" href="#">Action</a>
    <a class="dropdown-item" href="#">Another action</a>
    <a class="dropdown-item" href="#">Something else here</a>
  </div>
</div>
</br>
<div class="dropdown">
<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Dropdown button
</button>
<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
<a class="dropdown-item" href="#">Action</a>
<a class="dropdown-item" href="#">Another action</a>
<a class="dropdown-item" href="#">Something else here</a>
</div>
</div>
</br>
<div class="dropdown">
<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Dropdown button
</button>
<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
<a class="dropdown-item" href="#">Action</a>
<a class="dropdown-item" href="#">Another action</a>
<a class="dropdown-item" href="#">Something else here</a>
</div>
</div>
          <div class="form-group">
            <div class="checkbox">
   <label><input type="checkbox" value="" >Option 1</label>
 </div>
 <div class="checkbox">
   <label><input type="checkbox" value="" >Option 2</label>
 </div>
 <div class="checkbox disabled">
   <label><input type="checkbox" value="" >Option 3</label>
 </div>

 <form>
  <div class="form-group">
    <label for="email">Agriculture budget (integer):</label>
    <input type="email" class="form-control" id="input_agro">
  </div>
  <div class="form-group">
    <label for="email">Non Agriculture budget (integer):</label>
    <input type="email" class="form-control" id="input_non">
  </div>
  <div class="slidecontainer">
    <input type="range" min="0" max="100" value="25" id="myRange1">
      <p>Value: <span id="demo_1"></span></p>
  </div>
  <div class="slidecontainer">
    <input type="range" min="0" max="100" value="15" id="myRange2">
      <p>Value: <span id="demo_2"></span></p>
  </div>
 </form>
         </div>
       </div>
       <div class="page" id="2"  style="display:none;">
       <div class="dropdown">
<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
 Dropdown 2.1
</button>
<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
 <a class="dropdown-item" href="#">Action</a>
 <a class="dropdown-item" href="#">Another action</a>
 <a class="dropdown-item" href="#">Something else here</a>
</div>
</div>
</br>
<div class="dropdown">
<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Dropdown 2.2
</button>
<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
<a class="dropdown-item" href="#">Action</a>
<a class="dropdown-item" href="#">Another action</a>
<a class="dropdown-item" href="#">Something else here</a>
</div>
</div>
</br>
<div class="dropdown">
<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Dropdown 2.3
</button>
<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
<a class="dropdown-item" href="#">Action</a>
<a class="dropdown-item" href="#">Another action</a>
<a class="dropdown-item" href="#">Something else here</a>
</div>
</div>
       <div class="form-group">
         <div class="checkbox">
<label><input type="checkbox" value="" >2Option 1</label>
</div>
<div class="checkbox">
<label><input type="checkbox" value="" >2Option 2</label>
</div>
<div class="checkbox disabled">
<label><input type="checkbox" value="" >2Option 3</label>
</div>

<form>
<div class="form-group">
 <label for="email">Title:</label>
 <input type="email" class="form-control" id="text_input_1">
</div>
<div class="form-group">
 <label for="email">Subtitle:</label>
 <input type="email" class="form-control" id="text_input_2">
</div>
</form>
      </div>
    </div>
    <div class="page" id="3" style="display:none;">
    <div class="dropdown">
<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Dropdown 3.1
</button>
<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
<a class="dropdown-item" href="#">Action</a>
<a class="dropdown-item" href="#">Another action</a>
<a class="dropdown-item" href="#">Something else here</a>
</div>
</div>
</br>
<div class="dropdown">
<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Dropdown 3.2
</button>
<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
<a class="dropdown-item" href="#">Action</a>
<a class="dropdown-item" href="#">Another action</a>
<a class="dropdown-item" href="#">Something else here</a>
</div>
</div>
</br>
<div class="dropdown">
<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
Dropdown 3.3
</button>
<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
<a class="dropdown-item" href="#">Action</a>
<a class="dropdown-item" href="#">Another action</a>
<a class="dropdown-item" href="#">Something else here</a>
</div>
</div>
    <div class="form-group">
      <div class="checkbox">
<label><input type="checkbox" value="" >3Option 1</label>
</div>
<div class="checkbox">
<label><input type="checkbox" value="" >3Option 2</label>
</div>
<div class="checkbox disabled">
<label><input type="checkbox" value="" >3Option 3</label>
</div>

<form>
<div class="form-group">
<label for="email">Title:</label>
<input type="email" class="form-control" id="text_input_1">
</div>
<div class="form-group">
<label for="email">Subtitle:</label>
<input type="email" class="form-control" id="text_input_2">
</div>
</form>
   </div>
 </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" id="confirm">Confirm</button>
        </div>

    <nav aria-label="pagination example" class="transparent-style">
      <ul class="pagination pagination-circle pg-blue mb-0">

        <li class="page-item active" id="1">
            <a class="page-link" href="#">
              1
              <span class="sr-only">(current)</span>
            </a>
        </li>
        <li class="page-item"  id="2"><a class="page-link" href="#">2</a></li>
        <li class="page-item"  id="3"><a class="page-link" href="#">3</a></li>
      </ul>
    </nav>
      </div>
    </div>
  </div>
<div class="wrapperinner">
    <div id="container1" remote="true" style="min-width: 800px; height: 400px; margin: 0 auto"></div>
</div>

</div>
<div id="containerinner2">
  <div id="container2" remote="true" style="min-width: 480px; height: 300px" style="display:none"></div>
</div>
</div>
<script>
var tabsChosen = 1;

$(function() {



$(document).on('ready', function() {

  $('#slider1').slider({
    min: 0.05,
    max: 0.4,
    step: 0.01,
    values: [0.25]
  })
  .slider("pips", {
        first: "label",
        last: "label",
        rest: "label",
        step: 20,
        labels: false,
        prefix: "",
        suffix: ""

    })
    .slider("float");

$('#slider2').slider({
  min: 0.05,
  max: 0.8,
  step: 0.01,
  values: [0.33]
})
.slider("pips", {
      first: "label",
      last: "label",
      rest: "label",
      step: 50,
      labels: false,
      prefix: "",
      suffix: ""

  })
  .slider("float");

$('#slider3').slider({
  min: 0,
  max: 10,
  step: 1,
  values: [2]
})
.slider("pips", {
      first: "label",
      last: "label",
      rest: "label",
      step: 10,
      labels: false,
      prefix: "",
      suffix: ""

  })
  .slider("float");

$('#slider4').slider({
  min: 0,
  max: 10,
  step: 1,
  values: [3]
})
.slider("pips", {
      first: "label",
      last: "label",
      rest: "label",
      step: 10,
      labels: false,
      prefix: "",
      suffix: ""
  })
  .slider("float");

$('#slider5').slider({
  min: 0,
  max: 10,
  step: 1,
  values: [6]
})
.slider("pips", {
      first: "label",
      last: "label",
      rest: "label",
      step: 10,
      labels: false,
      prefix: "",
      suffix: ""

  })
  .slider("float");

$('#slider6').slider({
  min: 0,
  max: 10,
  step: 1,
  values: [1]
})
.slider("pips", {
      first: "label",
      last: "label",
      rest: "label",
      step: 10,
      labels: false,
      prefix: "",
      suffix: ""

  })
  .slider("float");
});

var linvest = document.getElementById("invest");
var lagrar = document.getElementById("agrar");
var lnr = document.getElementById("nr");
var lfm = document.getElementById("fm");
var lma = document.getElementById("ma");
var lhr = document.getElementById("hr");

$("#invest").hover(function(e) {
  $("#tooltip").show();
},
  function(e) {
    $("#tooltip").hide();
});

var currentinput = document.getElementById("text_input");
  $('#button_plus').on("click", function(event) {
  //  currentinput.readonly = false;
      var inputtest = parseFloat(currentinput.value);
      if(inputtest != 10) {
        inputtest = inputtest + 1;
        currentinput.value = inputtest;
        old_relative_hr = relative_hr;
      //  output6.innerHTML = this.value;
        relative_hr = inputtest;
        chartOptions.title = "previous values: ";
        hiddenElem.value = chartOptions;
        old_chart_options = {

          colors: ['#A8A8A8'],
          chart: { // renderTo: "pie_chart"

          type: chartOptions.chart.type },
          title: { text: chartOptions.title },
          xAxis: { type: chartOptions.xAxis.type, categories: chartOptions.xAxis.categories},
          yAxis: { title: { text:  chartOptions.yAxis.title.text } },
          series: chartOptions.series
       };
        updateChartWithValues();
      };
  //  currentinput.readonly = true;
  });

  $('#button_minus').on("click", function(event) {
  //  currentinput.readonly = false;
      var inputtest = parseFloat(currentinput.value);
      if(inputtest != 0) {
        inputtest = inputtest - 1;
        currentinput.value = inputtest;
        old_relative_hr = relative_hr;
      //  output6.innerHTML = this.value;
        relative_hr = inputtest;
        chartOptions.title = "previous values: ";
        hiddenElem.value = chartOptions;
        old_chart_options = {

          colors: ['#A8A8A8'],
          chart: { // renderTo: "pie_chart"

          type: chartOptions.chart.type },
          title: { text: chartOptions.title },
          xAxis: { type: chartOptions.xAxis.type, categories: chartOptions.xAxis.categories},
          yAxis: { title: { text:  chartOptions.yAxis.title.text } },
          series: chartOptions.series
       };
        updateChartWithValues();
      };
  //  currentinput.readonly = true;
  });

/*  $('#sliderrr').on("slidestart", function(event) {
    window.alert("sliderrr");
  }); */

  var tabChosen = 1;

  /*old*/
  var in_budget_agriculture = 25;
  var in_budget_non_agriculture = 15;
  /*old*/

  /* range: [0.05, 0.4]*/
  var investment_share = 0.25;
  /* range: [0.05, 0.8]*/
  var agrar_share = 0.33;
  var relative_nr = 2;
  var relative_fm = 3;
  var relative_ma = 6;
  var relative_hr = 1;

  var old_investment_share = null;
  var old_agrar_share = null;
  var old_relative_nr = null;
  var old_relative_fm = null;
  var old_relative_ma = null;
  var old_relative_hr = null;

  var years = [1,2,3,4,5,6,7,8,9,10]

  /*old*/
  var old_in_budget_agriculture = null;
  var old_in_budget_non_agriculture = null;

  var old_chart_options = null;

  var slider1 = document.getElementById("slider1");
//  var output1 = document.getElementById("demo_1");
  var slider2 = document.getElementById("slider2");
//  var output2 = document.getElementById("demo_2");

  var slider3 = document.getElementById("slider3");
//  var output3 = document.getElementById("demo_3");
  var slider4 = document.getElementById("slider4");
//  var output4 = document.getElementById("demo_4");
  var slider5 = document.getElementById("slider5");
//  var output5 = document.getElementById("demo_5");
  var slider6 = document.getElementById("slider6");
//  var output6 = document.getElementById("demo_6");

  var hiddenElem = document.getElementById("hidden");

//  output1.innerHTML = slider1.value; // Display the default slider value
//  output2.innerHTML = slider2.value;
//  output3.innerHTML = slider3.value;
//  output4.innerHTML = slider4.value;
//  output5.innerHTML = slider5.value;
//  output6.innerHTML = slider6.value;

  // Update the current slider value (each time you drag the slider handle)
  $('#slider1').on("slidechange", function(event, ui) {
    //  window.alert("slider1: " + parseFloat(ui.value));
      old_investment_share = investment_share;
    //  output1.innerHTML = parseFloat(ui.value);
      investment_share = parseFloat(ui.value);
      chartOptions.title = "previous input values: ";
      hiddenElem.value = chartOptions;
      old_chart_options = {
        colors: ['#A8A8A8'],
        chart: { // renderTo: "pie_chart"
        type: chartOptions.chart.type },
        title: { text: chartOptions.title },
        xAxis: { type: chartOptions.xAxis.type, categories: chartOptions.xAxis.categories},
        yAxis: { title: { text:  chartOptions.yAxis.title.text } },
        series: chartOptions.series
     };
      updateChartWithValues();
  });

  $('#slider2').on("slidechange", function(event, ui) {
      old_agrar_share = agrar_share;
    //  output2.innerHTML = this.value;
      agrar_share = parseFloat(ui.value);
      chartOptions.title = "previous values: ";
      hiddenElem.value = chartOptions;
      old_chart_options = {

        colors: ['#A8A8A8'],
        chart: { // renderTo: "pie_chart"
        type: chartOptions.chart.type },
        title: { text: chartOptions.title },
        xAxis: { type: chartOptions.xAxis.type, categories: chartOptions.xAxis.categories},
        yAxis: { title: { text:  chartOptions.yAxis.title.text } },
        series: chartOptions.series
     };
      updateChartWithValues();
  });

  $('#slider3').on("slidechange", function(event, ui) {
      old_relative_nr = relative_nr;
    //  output3.innerHTML = this.value;
      relative_nr =  parseFloat(ui.value);
      chartOptions.title = "previous input values: ";
      hiddenElem.value = chartOptions;
      old_chart_options = {

        colors: ['#A8A8A8'],
        chart: { // renderTo: "pie_chart"
        type: chartOptions.chart.type },
        title: { text: chartOptions.title },
        xAxis: { type: chartOptions.xAxis.type, categories: chartOptions.xAxis.categories},
        yAxis: { title: { text:  chartOptions.yAxis.title.text } },
        series: chartOptions.series
     };
      updateChartWithValues();
  });

  $('#slider4').on("slidechange", function(event, ui) {
      old_relative_fm = relative_fm;
    //  output4.innerHTML = this.value;
      relative_fm = parseFloat(ui.value);
      chartOptions.title = "previous values: ";
      hiddenElem.value = chartOptions;
      old_chart_options = {

        colors: ['#A8A8A8'],
        chart: { // renderTo: "pie_chart"
        type: chartOptions.chart.type },
        title: { text: chartOptions.title },
        xAxis: { type: chartOptions.xAxis.type, categories: chartOptions.xAxis.categories},
        yAxis: { title: { text:  chartOptions.yAxis.title.text } },
        series: chartOptions.series
     };
      updateChartWithValues();
  });

  $('#slider5').on("slidechange", function(event, ui) {
      old_relative_ma = relative_ma;
    //  output5.innerHTML = this.value;
      relative_ma = parseFloat(ui.value);
      chartOptions.title = "previous input values: ";
      hiddenElem.value = chartOptions;
      old_chart_options = {

        colors: ['#A8A8A8'],
        chart: { // renderTo: "pie_chart"
        type: chartOptions.chart.type },
        title: { text: chartOptions.title },
        xAxis: { type: chartOptions.xAxis.type, categories: chartOptions.xAxis.categories},
        yAxis: { title: { text:  chartOptions.yAxis.title.text } },
        series: chartOptions.series
     };
      updateChartWithValues();
  });

  $('#slider6').on("slidechange", function(event, ui) {
      old_relative_hr = relative_hr;
    //  output6.innerHTML = this.value;
      relative_hr = parseFloat(ui.value);
      chartOptions.title = "previous values: ";
      hiddenElem.value = chartOptions;
      old_chart_options = {

        colors: ['#A8A8A8'],
        chart: { // renderTo: "pie_chart"

        type: chartOptions.chart.type },
        title: { text: chartOptions.title },
        xAxis: { type: chartOptions.xAxis.type, categories: chartOptions.xAxis.categories},
        yAxis: { title: { text:  chartOptions.yAxis.title.text } },
        series: chartOptions.series
     };
      updateChartWithValues();
  });

//$("#myRange1").slider();
//  var slider_1 = new Slider("#myRange1");
  $("#myRange1").on("slide", function(slideEvt) {
     window.alert("sliding");
	   $("#demo_1").text(slideEvt.value);
  });

  /*old*/

  var currentPage = 1;
  var pageNumbers = [];
  var chartType = "pie";

  /*old*/
  $('#showModal').on("click", function(event) {
      $('.modal').modal('show');
      modalIsShowing = true;
    $('.page-item').each(function(event) {
      var itemId = $(this).attr('id');
      if (itemId == '1') {
        $('#' + itemId + '.page-item').addClass('active');
        $("div[id='" + itemId + "']").show();
      } else {
        $('#' + itemId + '.page-item').removeClass('active');
        $("div[id='" + itemId + "']").hide();
      }
      pageNumbers.push(itemId);
    });
  });

  $('.page-item').on("click", function(event) {
     var previousPage = currentPage;
     var elementToHide = $("div[id='" + previousPage + "']");
     currentPage = $(this).attr('id');
     var elementToShow = $("div[id='" + currentPage + "']")
     $('#' + previousPage + '.page-item').removeClass('active');
     $('#' + currentPage + '.page-item').addClass('active');
     elementToHide.hide();
     elementToShow.show();
  });
  /*old*/

  var series = [
    <% @graph.series.each { |serie| %>
      {
      name: '<%= serie[:name] %>',
      data: <%= raw @graph.series[0][:data_array] %>
      //data: '<%#= raw dataValue %>'
      }
  <%  } %>
  ];

  var chartOptions = {
    chart: { // renderTo: "pie_chart"
    type: "<%= @graph.type %>" },
    title: { text: "<%= @graph.title %>" },
    xAxis: { type: "<%= @graph.x_opts[:type] %>", categories: "<%= @graph.x_opts[:categories] %>" },
    yAxis: { title: { text: "<%= @graph.y_opts[:title] %>" } }
 };

 window.updateChart = function(series) {
  <% puts "update function called" %>
  tabsChosen = 1;
  chartType = "line";
  var title = "wzs";
  chartOptions.chart.type = chartType;
  chartOptions.title = title;
  chartOptions.xAxis.categories = years;
  updateChartWithValues();
};

$('#wzs').click(function () {
    old_chart_options = null;
    tabsChosen = 1;
    chartType = "line";
    var title = "WZS";
    chartOptions.chart.type = chartType;
    chartOptions.title = title;
    chartOptions.xAxis.categories = years;
    updateChartWithValues();
});

$('#z1').click(function () {
   old_chart_options = null;
    tabsChosen = 2;
    chartType = "line";
    var title = "z1";
    chartOptions.chart.type = chartType;
    chartOptions.title = title;
    chartOptions.xAxis.categories = years;
    updateChartWithValues();
});

$('#z2').click(function () {
   old_chart_options = null;

    tabsChosen = 3;
    chartType = "line";
    var title = "z2";
    chartOptions.chart.type = chartType;
    chartOptions.title = title;
    chartOptions.xAxis.categories = years;
    updateChartWithValues();
});

$('#z3').click(function () {
   old_chart_options = null;

    tabsChosen = 4;
    chartType = "line";
    var title = "z3";
    var yTitle = "years";
    chartOptions.chart.type = chartType;
    chartOptions.title = title;
    chartOptions.xAxis.categories = years;
    updateChartWithValues();
});

$('#z4').click(function () {
   old_chart_options = null;

    tabsChosen = 5;
    chartType = "line";
    var title = "z4";
    var yTitle = "years";
    chartOptions.chart.type = chartType;
    chartOptions.title = title;
    chartOptions.xAxis.categories = years;
    updateChartWithValues();
});

$('#z5').click(function () {
   old_chart_options = null;

    tabsChosen = 6;
    chartType = "line";
    var title = "z5";
    var yTitle = "years";
    chartOptions.chart.type = chartType;
    chartOptions.title = title;
    chartOptions.xAxis.categories = years;
    updateChartWithValues();
});

$('#z6').click(function () {
   old_chart_options = null;

    tabsChosen = 7;
    chartType = "line";
    var title = "z6";
    var yTitle = "years";
    chartOptions.chart.type = chartType;
    chartOptions.title = title;
    chartOptions.xAxis.categories = years;
    updateChartWithValues();
});

$('#z7').click(function () {
    old_chart_options = null;

    tabsChosen = 8;
    chartType = "line";
    var title = "z7";
    var yTitle = "years";
    chartOptions.chart.type = chartType;
    chartOptions.title = title;
    chartOptions.xAxis.categories = years;
    updateChartWithValues();
});

var p_rho = 0.5;
var p_mu1 = 0.7;
var p_mu2 = 0.3;
var p_emax = 10;
var p_a = 1;
var p_b = -15;

var yearStart = 2009;
var yearEnd = 2021;

/*
var years = (function() {
  var years_array = [];
  while(yearStart < yearEnd + 1) {
    years_array.push(yearStart++);
  }
  return years_array;
})(); */

function output_effective_budget() {
  var firstSum = p_mu1 * Math.pow(in_budget_agriculture, -p_rho);
  var secondSum = p_mu2 * Math.pow(in_budget_non_agriculture,-p_rho);
  var result = Math.pow((firstSum + secondSum), (-1 / p_rho));
  return result;
};

function output_tp() {
  var firstExp = p_a * output_effective_budget() + p_b;
  var secondExp = p_a * output_effective_budget() + p_b;
  return p_emax * (Math.exp(firstExp)) / (1 + Math.exp(secondExp));
};

function output_goal_achievement_poverty() {
  var output_array = [];
  for(i = 0; i < years.length; i++) {
    var valueToPush = 100 - output_tp() * 0.1 * (years[i] - 1);
    output_array.push(valueToPush);
  }
  return output_array;
};

function output_goal_achivement_public_goods() {
//  window.alert("argf: " + in_budget_agriculture + "; nonf: " + in_budget_non_agriculture);
  var result = 100 - (in_budget_agriculture + in_budget_non_agriculture);
//  window.alert("result: " + result);
  return 100 - (in_budget_agriculture + in_budget_non_agriculture);
};

function output_goal_achivement_public_goods_years() {
  var output_array = [];
  for(i = 1; i < years.length; i++) {
    output_array.push(100 - (in_budget_agriculture + in_budget_non_agriculture) + output_tp() * 0.8 * (years[i] - 1));
  }
  return output_array;
};

function output_wzs() {
  var output_array = [];

  NONAG = investment_share * (1 - agrar_share);
  NR = investment_share * agrar_share * relative_nr / (relative_nr + relative_fm + relative_ma + relative_hr);
  FM = investment_share * agrar_share * relative_fm / (relative_nr + relative_fm + relative_ma + relative_hr);
  MA = investment_share * agrar_share * relative_ma / (relative_nr + relative_fm + relative_ma + relative_hr);
  HR = investment_share * agrar_share * relative_hr / (relative_nr + relative_fm + relative_ma + relative_hr);

  wZ1 = 0.03815609 + 0.009317891 * NR + -0.09422917 * NR * NR + 0.01042949 * FM + -0.1066363 * FM * FM + 0.04761692 * MA + -0.2115398 * MA * MA + 0.008736629 * HR + -0.08689586 * HR * HR + 0.2355192 * NONAG + -0.3277703 * NONAG * NONAG;
  wZ2 = 0.002992926 + 0.01636231 * NR + -0.06932432 * NR * NR + 0.03757891 * FM + -0.1557839 * FM * FM + 0.02726628 * MA + -0.1040575 * MA * MA + 0.02314826 * HR + -0.09319288 * HR * HR + 0.05986973 * NONAG + -0.07809279 * NONAG * NONAG;
  wZ3 = 0.08384501 + -0.7482027 * NR + -0.4816802 * NR * NR + -0.573682 * FM + -1.117864 * FM * FM + -0.6393244 * MA + -0.8277594 * MA * MA + -0.6944213 * HR + -0.6600634 * HR * HR + -0.3013967 * NONAG + -0.7381306 * NONAG * NONAG;
  wZ4 = 0.05460506 + 0.1725816 * NR + -0.7801275 * NR * NR + 0.300523 * FM + -1.274792 * FM * FM + 0.1717909 * MA + -0.7029481 * MA * MA + 0.1937015 * HR + -0.8254542 * HR * HR + 0.1793275 * NONAG + -0.2468094 * NONAG * NONAG;
  wZ5 = 0.03781077 + 0.04533998 * NR + -0.2022937 * NR * NR + 0.1167748 * FM + -0.4649394 * FM * FM + 0.09289019 * MA + -0.3516543 * MA * MA + 0.0672851 * HR + -0.2737941 * HR * HR + 0.2295746 * NONAG + -0.2929575 * NONAG * NONAG;
  wZ6 = 0.0434538 + 0.01437698 * NR + -0.07777468 * NR * NR + 0.03920955 * FM + -0.1656638 * FM * FM + 0.04896659 * MA + -0.2155554 * MA * MA + 0.02191561 * HR + -0.1060559 * HR * HR + 0.1342406 * NONAG + 0.07673141 * NONAG * NONAG;
  wZ7 = -0.000006415758 + 0.000001345764 * NR + 0.000006775817 * NR * NR + -0.000003279563 * FM + 0.00001479488 * FM * FM + -0.000008525427 * MA + 0.00004173186 * MA * MA + 0.000002755462 * HR + 0.000004497611 * HR * HR + -0.00005203285 * NONAG + 0.00006610333 * NONAG * NONAG;

  output_array.push(wZ1);
  output_array.push(wZ2);
  output_array.push(wZ3);
  output_array.push(wZ4);
  output_array.push(wZ5);
  output_array.push(wZ6);
  output_array.push(wZ7);

  return output_array;
};

function output_z1() {
  var output_array = [];

  NONAG = investment_share * (1 - agrar_share);
  NR = investment_share * agrar_share * relative_nr / (relative_nr + relative_fm + relative_ma + relative_hr);
  FM = investment_share * agrar_share * relative_fm / (relative_nr + relative_fm + relative_ma + relative_hr);
  MA = investment_share * agrar_share * relative_ma / (relative_nr + relative_fm + relative_ma + relative_hr);
  HR = investment_share * agrar_share * relative_hr / (relative_nr + relative_fm + relative_ma + relative_hr);

  wZ1 = 0.03815609 + 0.009317891 * NR + -0.09422917 * NR * NR + 0.01042949 * FM + -0.1066363 * FM * FM + 0.04761692 * MA + -0.2115398 * MA * MA + 0.008736629 * HR + -0.08689586 * HR * HR + 0.2355192 * NONAG + -0.3277703 * NONAG * NONAG;

  output_array = years.map(function(year) { return 858.6967 * (1 + (year - 1) * wZ1); });
  return output_array;
};

function output_z2() {
  var output_array = [];

  NONAG = investment_share * (1 - agrar_share);
  NR = investment_share * agrar_share * relative_nr / (relative_nr + relative_fm + relative_ma + relative_hr);
  FM = investment_share * agrar_share * relative_fm / (relative_nr + relative_fm + relative_ma + relative_hr);
  MA = investment_share * agrar_share * relative_ma / (relative_nr + relative_fm + relative_ma + relative_hr);
  HR = investment_share * agrar_share * relative_hr / (relative_nr + relative_fm + relative_ma + relative_hr);

  wZ2 = 0.002992926 + 0.01636231 * NR + -0.06932432 * NR * NR + 0.03757891 * FM + -0.1557839 * FM * FM + 0.02726628 * MA + -0.1040575 * MA * MA + 0.02314826 * HR + -0.09319288 * HR * HR + 0.05986973 * NONAG + -0.07809279 * NONAG * NONAG;

  output_array = years.map(function(year) {return (100 - ( 85.46574 * (1 + (year - 1) * wZ2))) * 3; });

  return output_array;
};

function output_z3() {
  var output_array = [];

  NONAG = investment_share * (1 - agrar_share);
  NR = investment_share * agrar_share * relative_nr / (relative_nr + relative_fm + relative_ma + relative_hr);
  FM = investment_share * agrar_share * relative_fm / (relative_nr + relative_fm + relative_ma + relative_hr);
  MA = investment_share * agrar_share * relative_ma / (relative_nr + relative_fm + relative_ma + relative_hr);
  HR = investment_share * agrar_share * relative_hr / (relative_nr + relative_fm + relative_ma + relative_hr);

  wZ3 = 0.08384501 + -0.7482027 * NR + -0.4816802 * NR * NR + -0.573682 * FM + -1.117864 * FM * FM + -0.6393244 * MA + -0.8277594 * MA * MA + -0.6944213 * HR + -0.6600634 * HR * HR + -0.3013967 * NONAG + -0.7381306 * NONAG * NONAG;

  output_array = years.map(function(year) { return 379.7354 * (1 + (year - 1) * wZ3); });

  return output_array;
};

function output_z4() {
  var output_array = [];

  NONAG = investment_share * (1 - agrar_share);
  NR = investment_share * agrar_share * relative_nr / (relative_nr + relative_fm + relative_ma + relative_hr);
  FM = investment_share * agrar_share * relative_fm / (relative_nr + relative_fm + relative_ma + relative_hr);
  MA = investment_share * agrar_share * relative_ma / (relative_nr + relative_fm + relative_ma + relative_hr);
  HR = investment_share * agrar_share * relative_hr / (relative_nr + relative_fm + relative_ma + relative_hr);

  wZ4 = 0.05460506 + 0.1725816 * NR + -0.7801275 * NR * NR + 0.300523 * FM + -1.274792 * FM * FM + 0.1717909 * MA + -0.7029481 * MA * MA + 0.1937015 * HR + -0.8254542 * HR * HR + 0.1793275 * NONAG + -0.2468094 * NONAG * NONAG;

  output_array = years.map(function(year) { return 121.74 * (1 + (year - 1) * wZ4); });

  return output_array;
};

function output_z5() {
  var output_array = [];

  NONAG = investment_share * (1 - agrar_share);
  NR = investment_share * agrar_share * relative_nr / (relative_nr + relative_fm + relative_ma + relative_hr);
  FM = investment_share * agrar_share * relative_fm / (relative_nr + relative_fm + relative_ma + relative_hr);
  MA = investment_share * agrar_share * relative_ma / (relative_nr + relative_fm + relative_ma + relative_hr);
  HR = investment_share * agrar_share * relative_hr / (relative_nr + relative_fm + relative_ma + relative_hr);

  wZ5 = 0.03781077 + 0.04533998 * NR + -0.2022937 * NR * NR + 0.1167748 * FM + -0.4649394 * FM * FM + 0.09289019 * MA + -0.3516543 * MA * MA + 0.0672851 * HR + -0.2737941 * HR * HR + 0.2295746 * NONAG + -0.2929575 * NONAG * NONAG;

  output_array = years.map(function(year) { return 3625.429 * (1 + (year - 1) * wZ5); });

  return output_array;
};

function output_z6() {
  var output_array = [];

  NONAG = investment_share * (1 - agrar_share);
  NR = investment_share * agrar_share * relative_nr / (relative_nr + relative_fm + relative_ma + relative_hr);
  FM = investment_share * agrar_share * relative_fm / (relative_nr + relative_fm + relative_ma + relative_hr);
  MA = investment_share * agrar_share * relative_ma / (relative_nr + relative_fm + relative_ma + relative_hr);
  HR = investment_share * agrar_share * relative_hr / (relative_nr + relative_fm + relative_ma + relative_hr);

  wZ6 = 0.0434538 + 0.01437698 * NR + -0.07777468 * NR * NR + 0.03920955 * FM + -0.1656638 * FM * FM + 0.04896659 * MA + -0.2155554 * MA * MA + 0.02191561 * HR + -0.1060559 * HR * HR + 0.1342406 * NONAG + 0.07673141 * NONAG * NONAG;

  output_array = years.map(function(year) { return 1405.489 * (1 + (year - 1) * wZ6); });

  return output_array;
};

function output_z7() {
  var output_array = [];

  NONAG = investment_share * (1 - agrar_share);
  NR = investment_share * agrar_share * relative_nr / (relative_nr + relative_fm + relative_ma + relative_hr);
  FM = investment_share * agrar_share * relative_fm / (relative_nr + relative_fm + relative_ma + relative_hr);
  MA = investment_share * agrar_share * relative_ma / (relative_nr + relative_fm + relative_ma + relative_hr);
  HR = investment_share * agrar_share * relative_hr / (relative_nr + relative_fm + relative_ma + relative_hr);

  wZ7 = -0.000006415758 + 0.000001345764 * NR + 0.000006775817 * NR * NR + -0.000003279563 * FM + 0.00001479488 * FM * FM + -0.000008525427 * MA + 0.00004173186 * MA * MA + 0.000002755462 * HR + 0.000004497611 * HR * HR + -0.00005203285 * NONAG + 0.00006610333 * NONAG * NONAG;

  output_array = years.map(function(year) { return 99.96191 * (1 + (year - 1) * wZ7); });

  return output_array;
};

window.updateChartWithValues = function() {
    switch(tabsChosen) {
    case 1:
      var seriesData = output_wzs();
    //  window.alert("series data1: " + seriesData);
      chartOptions.series = [{
          name: "WZS",
          data: seriesData
      }
    ];
      break;
    case 2:
      var seriesData = output_z1();
  //    window.alert("series data2: " + seriesData);
      chartOptions.series = [{
          name: "Z1",
          data: seriesData
        }];
          break;
    case 3:
  //    window.alert("agri: "+ in_budget_agriculture +"; non: " + in_budget_non_agriculture);
      var seriesData = output_z2();
  //    window.alert("series data3: " + seriesData);
      chartOptions.series = [{
          name: "Z2",
          data: seriesData
      }];
        break;
    case 4:
      var seriesData = output_z3();
  //    window.alert("series data4: " + seriesData);
      chartOptions.series = [{
          name: "Z3",
          data: seriesData
      }];
        break;
    case 5:
      var seriesData = output_z4();
  //    window.alert("series data5: " + seriesData);
      chartOptions.series = [{
          name: "Z4",
          data: seriesData
      }];
        break;
    case 6:
      var seriesData = output_z5();
      //    window.alert("series data5: " + seriesData);
      chartOptions.series = [{
          name: "Z5",
          data: seriesData
      }];
    break;
    case 7:
      var seriesData = output_z6();
      //    window.alert("series data5: " + seriesData);
      chartOptions.series = [{
            name: "Z6",
            data: seriesData
      }];
      break;
    case 8:
      var seriesData = output_z7();
      //    window.alert("series data5: " + seriesData);
      chartOptions.series = [{
            name: "Z7",
            data: seriesData
      }];
      break;
    default:
      <% puts "in case default" %>
  }

    Highcharts.chart('container1', chartOptions);
    var elementToHide = document.getElementById("container2");
    var containerToHide = document.getElementById("containerinner2");

    if (old_chart_options != null) {
      containerToHide.style.display = "block";
      elementToHide.style.display = "block";
      Highcharts.chart('container2', old_chart_options);
    } else {
    //  var elementToHide = document.getElementById("container2");
      elementToHide.style.display = "none";
      containerToHide.style.display = "none";
    };
};

updateChart(series);

/*
  var chart = $('#container1').highcharts({
     chart: {
      // renderTo: "pie_chart"
       type: "<%= @graph.type %>"
       },
       title: { text: "<%= @graph.title %>" },
       xAxis: { type: "<%= @graph.x_opts[:type] %>"},
       yAxis: {
       title: { text: "<%= @graph.y_opts[:title] %>" }
    },
    series: [
      <%# @graph.series.each { |serie| %>
        {
        name: '<%#= serie[:name] %>',
        data: graphData
        //data: '<%#= raw dataValue %>'
        }
    <%#  } %>
        ]
      }); */

      $('#confirm').on("click", function(event) {
        var id = $(this).attr('id');
        if (pageNumbers.length > 0) {

          var intValueOfPage = parseInt(currentPage);
          if (intValueOfPage > 0 && intValueOfPage == pageNumbers.length) {
            //exit, save, change graph
            var agro = document.getElementById('myRange1').value;
              window.alert("agro found: " + agro);
            if (parseInt(agro)) {
          //    window.alert("agro was set: " + agro);
              agro = parseInt(agro);
            } else {
              window.alert("agro was set to 0" );
              agro = 0;
            }

            var non = document.getElementById('myRange2').value;
            window.alert("non found: " + non);
            if (parseInt(non)) {
        //      window.alert("agro was set: " + non);
              non = parseInt(non);
            } else {
              window.alert("agro was set to 0" );
              non = 0;
            }

        //    window.alert("before update agro: " + agro + "; non: " + non);
            in_budget_agriculture = agro;
            in_budget_non_agriculture = non;
            updateChartWithValues(in_budget_agriculture, in_budget_non_agriculture);

            $('.modal.in').modal('toggle');
            currentPage = 1;
            pageNumbers = [];
          } else if (intValueOfPage > 0 && intValueOfPage < pageNumbers.length) {
            var previousPage = currentPage;
            var elementToHide = $("div[id='" + previousPage + "']");
            currentPage = (intValueOfPage + 1).toString();
            var elementToShow = $("div[id='" + currentPage + "']");
            $('#' + previousPage + '.page-item').removeClass('active');
            $('#' + currentPage + '.page-item').addClass('active');
            elementToHide.hide();
            elementToShow.show();
          }
        }
      });
   });

 </script>
 <!-- <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script> -->
       <!-- Bootstrap Js CDN -->
  <!--     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>  -->
       <!-- Custom Scroller Js CDN -->
<!--       <script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>  -->


  </body>
</html>
